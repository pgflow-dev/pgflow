---
title: Create your first worker
next:
    label: Configuration
    link: /edge-worker/configuration
---

import { Aside, Steps } from "@astrojs/starlight/components";
import { FileTree } from '@astrojs/starlight/components';

Setting up your first worker is straightforward and takes just a few minutes.

<Aside type="danger" title="Not production ready">
**Edge Worker** is currently in alpha stage and not yet production ready.
</Aside>

<Aside type="caution" title="Requirements">
Before starting, please read the [Prepare environment](/prepare-environment) guide.
</Aside>

<Steps>


1. ### Create your worker

    First, create a new Edge Function using the Supabase CLI. Then, replace its content with this code:

    ```typescript
    import { EdgeWorker } from "@pgflow/edge-worker";

    EdgeWorker.start(async (payload: { urlToScrape: string }) => {
      // do something with the message
      console.log('Scraping URL...', payload.urlToScrape);
    });
    ```

3. ### Start your worker

    Start the worker by sending an HTTP request to your Edge Function:

    ```bash
    curl http://localhost:54321/functions/v1/<function-name>
    ```

4. ### Process your first message

    By default, the worker looks for messages in the `tasks` queue (this name is configurable).

    Send a test message to the queue:

    ```sql
    SELECT pgmq.send(
      queue_name => 'tasks',
      msg => '{"urlToScrape": "https://example.com"}'::jsonb
    );
    ```

    The worker will process the message immediately.

    <Aside title="Creating queues">
      If you haven't created the queue beforehand, the worker will automatically create
      a logged, non-partitioned queue during startup.
    </Aside>

</Steps>
