import { Tabs, TabItem, LinkButton, Steps } from '@astrojs/starlight/components';


<Tabs>
<TabItem label="Scraping">

<Steps>


1. Define how you want to scrape the websites

   ```typescript
   EdgeWorker.start(async (message) => {
     const response = await fetch(payload.url);

     await supabase.from("websites").insert({ 
       url: payload.url,
       content: await response.text()
     });
   });
   ```

2. Send a message to the worker to start scraping

   <Tabs>
   <TabItem label="TypeScript">

   ```typescript
   await supabase.schema('pgmq_public').rpc('send', {
     queue_name: 'tasks',
     message: { url: 'https://pgflow.dev' }
   })
   ```

   </TabItem>

   <TabItem label="SQL">

   ```sql
   SELECT pgmq.send(
     queue_name => 'tasks',
     message => '{"url": "https://pgflow.dev"}'::jsonb
   );
   ```
   </TabItem>
   </Tabs>

3. The worker processes your message. Check results in **websites** table


</Steps>
</TabItem>
{/* <LinkButton variant="minimal" icon="external">Check more examples in Use Cases</LinkButton> */}
</Tabs>
