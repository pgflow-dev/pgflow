<script is:inline>
// Slow scroll configuration - change DURATION to adjust speed
const DURATION = 3000; // milliseconds for scroll animation

function setupSlowScroll() {
  const scrollable = document.querySelector('.scrollable-inner');
  console.log('SlowScroll: scrollable element found:', !!scrollable);
  if (!scrollable) return;

  let animationId = null;
  let startY = scrollable.scrollTop;
  let targetY = scrollable.scrollTop;
  let startTime = null;

  function easeOutCubic(t) {
    return 1 - Math.pow(1 - t, 3);
  }

  function animate(currentTime) {
    if (!startTime) startTime = currentTime;
    const elapsed = currentTime - startTime;
    const progress = Math.min(elapsed / DURATION, 1);

    const easedProgress = easeOutCubic(progress);
    scrollable.scrollTop = startY + (targetY - startY) * easedProgress;

    if (progress < 1) {
      animationId = requestAnimationFrame(animate);
    } else {
      animationId = null;
      startY = scrollable.scrollTop;
    }
  }

  scrollable.addEventListener('wheel', (e) => {
    console.log('SlowScroll: wheel event captured');
    e.preventDefault();
    e.stopPropagation();

    targetY += e.deltaY;
    targetY = Math.max(0, Math.min(targetY, scrollable.scrollHeight - scrollable.clientHeight));

    if (animationId === null) {
      startY = scrollable.scrollTop;
      startTime = null;
      animationId = requestAnimationFrame(animate);
    }
  }, { passive: false, capture: true });

  console.log('SlowScroll: wheel listener attached');
}

if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', setupSlowScroll);
} else {
  setupSlowScroll();
}
</script>
