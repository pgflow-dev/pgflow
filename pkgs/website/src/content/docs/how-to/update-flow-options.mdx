---
title: Update Flow Options
description: Learn how to safely update configuration options for existing flows
sidebar:
  order: 1
---

import { Aside } from "@astrojs/starlight/components";
import NotProductionReady from '@/components/NotProductionReady.astro';

Flow definitions in pgflow are fundamentally immutable in structure. For structural changes like adding steps or changing dependencies, create a new flow version instead (see [Version Your Flows](/how-to/version-your-flows/)). This guide focuses only on runtime configuration options you can safely update.

## Updatable Options

You can safely modify these runtime options without creating a new flow version:

| Option | Description | Default | Scope |
| ------ | ----------- | ------- | ----- |
| `opt_max_attempts` | Max retry attempts | 1 | Flow & Steps |
| `opt_base_delay` | Base retry delay (seconds) | 1 | Flow only |
| `opt_timeout` | Max execution time (seconds) | 30 | Flow & Steps |

## Configuration System

pgflow uses a two-level configuration approach:
- **Flow-level options**: Set defaults for all steps in the flow
- **Step-level options**: Override flow defaults for specific steps

## Updating Options Manually

Since the compiler doesn't support updating existing flows, you must manually update options in the database:

### Flow Level (Affects All Steps)
```sql
UPDATE pgflow.flows
SET opt_max_attempts = 5, opt_timeout = 10, opt_base_delay = 2
WHERE flow_slug = 'your_flow_slug';
```

### Step Level (Overrides Flow Defaults)
```sql
UPDATE pgflow.steps
SET opt_max_attempts = 3, opt_timeout = 30
WHERE flow_slug = 'your_flow_slug' AND step_slug = 'your_step_slug';
```

## Example: Increasing Retries for API Calls
```sql
-- Check current settings
SELECT step_slug, opt_max_attempts FROM pgflow.steps WHERE flow_slug = 'analyze_website';

-- Update API call step to retry more
UPDATE pgflow.steps SET opt_max_attempts = 5
WHERE flow_slug = 'analyze_website' AND step_slug = 'website';
```

<Aside type="caution">
After updating options in the database, remember to update your flow definition code to keep them in sync.
</Aside>
