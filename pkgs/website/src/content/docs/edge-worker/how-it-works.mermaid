graph TD
    subgraph "Supabase Edge Functions"
        EW[Edge Worker]
    end

    subgraph "Database"
        PGMQ[PGMQ Queue]
        HB[Heartbeats Table]
    end

    P[Producer] -->|sends message| PGMQ
    EW -->|polls messages| PGMQ
    EW -->|archives messages| PGMQ
    EW -->|processes messages| H[Handler Function]
    EW -->|sends heartbeats| HB
