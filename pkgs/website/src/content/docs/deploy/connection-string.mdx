---
title: Connection String Encoding
description: How to URL-encode special characters in database passwords
sidebar:
  order: 120
---

import { Aside, Tabs, TabItem } from "@astrojs/starlight/components";

If your database password contains special characters, you must URL-encode them to avoid authentication errors like:

```
Error: SASL_SIGNATURE_MISMATCH: The server did not return the correct signature
Error: password authentication failed for user
```

If you haven't gotten your connection string yet, see [Get Connection String](/deploy/supabase/get-connection-string/).

## Common Characters That Need Encoding

Check if your password contains any of these characters:

| Character | Encoding | Character | Encoding |
|-----------|----------|-----------|----------|
| `@` | `%40` | `&` | `%26` |
| `:` | `%3A` | `/` | `%2F` |
| `?` | `%3F` | `#` | `%23` |
| `%` | `%25` | ` ` (space) | `%20` |
| `!` | `%21` | `=` | `%3D` |

[Full encoding reference at MDN Web Docs](https://developer.mozilla.org/en-US/docs/Glossary/Percent-encoding)

## Encode Your Password

Use the code examples below to encode your password **on your own machine**. These methods allow you to encode your credentials locally without sharing them with third-party services.

<Aside type="tip">
Only encode the password portion, not the entire connection string.
</Aside>

<Tabs>
  <TabItem label="JavaScript / Node.js">
    ```javascript
    const encodedPassword = encodeURIComponent("my@complex&password!");
    console.log(encodedPassword);
    // Output: my%40complex%26password%21
    ```
  </TabItem>

  <TabItem label="Python">
    ```python
    import urllib.parse
    encoded_password = urllib.parse.quote("my@complex&password!")
    print(encoded_password)
    # Output: my%40complex%26password%21
    ```
  </TabItem>

  <TabItem label="Linux / macOS">
    ```bash
    # Requires jq
    encoded_password=$(printf %s "my@complex&password!" | jq -sRr @uri)
    echo $encoded_password
    # Output: my%40complex%26password%21
    ```
  </TabItem>
</Tabs>

## Complete Example

Here's a realistic example showing the full process:

**Original password from Supabase Dashboard:**
```
P@ssw0rd!2024
```

**Encode just the password:**
```
P%40ssw0rd%212024
```

**Original connection string:**
```
postgresql://postgres.pooler-yourproject:P@ssw0rd!2024@aws-0-us-east-1.pooler.supabase.com:6543/postgres
```

**Encoded connection string:**
```
postgresql://postgres.pooler-yourproject:P%40ssw0rd%212024@aws-0-us-east-1.pooler.supabase.com:6543/postgres
```

## Set as Supabase Secret

Use the encoded connection string to set your database secret:

```bash frame="none"
npx supabase secrets set EDGE_WORKER_DB_URL="postgresql://postgres.pooler-yourproject:P%40ssw0rd%212024@aws-0-us-east-1.pooler.supabase.com:6543/postgres"
```

Replace the hostname, project name, and encoded password with your actual values.

<Aside type="note">
For local development, add the encoded connection string to `supabase/functions/.env`:

```bash
EDGE_WORKER_DB_URL="postgresql://postgres.pooler-yourproject:P%40ssw0rd%212024@aws-0-us-east-1.pooler.supabase.com:6543/postgres"
```
</Aside>

## Verify It Works

Test your connection by deploying and starting your worker:

```bash frame="none"
npx supabase functions deploy your-worker-name
curl "https://your-project.supabase.co/functions/v1/your-worker-name" \
  -H "Authorization: Bearer YOUR_ANON_KEY"
```

If you see worker logs without authentication errors, the encoding worked.

For full deployment instructions, see [Deploy to Supabase](/deploy/supabase/).

## Security Considerations

<Aside type="caution" title="Password Security">
When working with database passwords:
- **Never** paste your database password into untrusted websites for encoding
- **Avoid** sharing your database password with third-party services
- **Don't** commit your database password to Git repositories
- Use environment variables and secrets management tools instead
</Aside>
