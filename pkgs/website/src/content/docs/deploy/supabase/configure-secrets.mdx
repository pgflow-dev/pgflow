---
title: Configure Secrets
description: Set up vault secrets for automatic worker management
sidebar:
  order: 15
---

import { Aside, Steps } from "@astrojs/starlight/components";

pgflow needs vault secrets to automatically manage workers in production.

<Steps>

1. ### Get your Project ID

   1. Open [Supabase Dashboard](https://supabase.com/dashboard)
   2. Select your project
   3. Go to **Project Settings** -> **General**
   4. Copy the **Project ID**

   ![Project Settings showing the Project ID field](../../../../assets/deploy/supabase/04-project-id.png)

2. ### Get your service role key

   1. Go to **Project Settings** -> **API Keys**
   2. Click the **Legacy anon, service_role API keys** tab
   3. Find `service_role` (labeled "secret") and click **Copy**

   ![API Keys page showing the service_role key](../../../../assets/deploy/supabase/05-service-role-key.png)

   <Aside type="caution">
   Keep this key secret - it bypasses Row Level Security.
   </Aside>

3. ### Create vault secrets

   Run in the SQL Editor:

   ```sql "your-project-id" "your-service-role-key"
   SELECT vault.create_secret('your-project-id', 'supabase_project_id');
   SELECT vault.create_secret('your-service-role-key', 'supabase_service_role_key');
   ```

   Replace the highlighted values with your actual Project ID and service role key from steps 1 and 2.

</Steps>
