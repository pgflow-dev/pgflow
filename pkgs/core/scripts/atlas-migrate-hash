#!/bin/bash

echo -e "\033[1;31m⚠️  This will hash migration files in supabase/migrations/\033[0m"
echo -e "\033[33mOnly safe for unreleased migrations in development!\033[0m"
echo ""
read -p "Are you sure you want to proceed? Type 'yes' to continue: " confirmation

if [ "$confirmation" != "yes" ]; then
    echo "Operation cancelled."
    exit 1
fi

atlas migrate hash --config file://atlas/atlas.hcl --dir file://supabase/migrations/
