#!/bin/bash
set -e

echo "Ensuring test database is ready..."

# Check if supabase is running
if ! supabase status > /dev/null 2>&1; then
  echo "Starting Supabase..."
  supabase start
fi

# Reset database (migrations should already be prepared by supabase:prepare target)
echo "Resetting database..."
supabase db reset

echo "Test database is ready!"